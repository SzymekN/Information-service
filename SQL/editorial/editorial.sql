-- MySQL Script generated by MySQL Workbench
-- Sat Mar  4 16:25:08 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering
-- -----------------------------------------------------
-- Schema editorialdb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `editorialdb`;
-- -----------------------------------------------------
-- Table `editorialdb`.`user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `editorialdb`.`user` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(45) NOT NULL,
  `password` VARCHAR(75) NOT NULL,
  `enabled` TINYINT(1) NOT NULL,
  PRIMARY KEY (`id`));
-- -----------------------------------------------------
-- Table `editorialdb`.`article_correct`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `editorialdb`.`article_correct` (
  `id_correct` BIGINT NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(200) NOT NULL,
  `content` LONGTEXT NOT NULL,
  `date_of_correction` DATETIME NULL,
  `is_corrected` TINYINT(1) NOT NULL,
  `journalist_id_c` BIGINT NOT NULL,
  `corrector_id_c` BIGINT NULL,
  PRIMARY KEY (`id_correct`),
  INDEX `article_fk_idx` (`corrector_id_c` ASC),
  CONSTRAINT `article_fk`
    FOREIGN KEY (`corrector_id_c`)
    REFERENCES `editorialdb`.`user` (`id`));
-- -----------------------------------------------------
-- Table `editorialdb`.`article_draft`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `editorialdb`.`article_draft` (
  `id_draft` BIGINT NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(200) NOT NULL,
  `content` LONGTEXT NOT NULL,
  `date_of_completion` DATETIME NULL,
  `journalist_id_d` BIGINT NOT NULL,
  PRIMARY KEY (`id_draft`),
  INDEX `draft_fk_idx` (`journalist_id_d` ASC),
  CONSTRAINT `draft_fk`
    FOREIGN KEY (`journalist_id_d`)
    REFERENCES `editorialdb`.`user` (`id`)
	ON DELETE CASCADE ON UPDATE CASCADE);
-- -----------------------------------------------------
-- Table `editorialdb`.`article_proposal`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `editorialdb`.`article_proposal` (
  `id_proposal` BIGINT NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(200) NOT NULL,
  `acceptance` ENUM('PENDING', 'ACCEPTED', 'DECLINED') NOT NULL,
  `date_of_update` DATETIME NULL,
  `journalist_id_p` BIGINT NOT NULL,
  PRIMARY KEY (`id_proposal`),
  INDEX `redactor_id_fk_idx` (`journalist_id_p` ASC),
  CONSTRAINT `redactor_id_fk`
    FOREIGN KEY (`journalist_id_p`)
    REFERENCES `editorialdb`.`user` (`id`)
	ON DELETE CASCADE ON UPDATE CASCADE);
-- -----------------------------------------------------
-- Table `editorialdb`.`authority`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `editorialdb`.`authority` (
  `user_id_a` BIGINT NOT NULL,
  `authority` VARCHAR(45) NOT NULL,
  INDEX `authority_fk` (`user_id_a` ASC),
  CONSTRAINT `authority_fk`
    FOREIGN KEY (`user_id_a`)
    REFERENCES `editorialdb`.`user` (`id`)
    ON DELETE CASCADE ON UPDATE CASCADE);
-- -----------------------------------------------------
-- Table `editorialdb`.`user_detail`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `editorialdb`.`user_detail` (
  `user_id_d` BIGINT NOT NULL,
  `name` VARCHAR(45) NOT NULL,
  `surname` VARCHAR(45) NOT NULL,
  `email` VARCHAR(45) NOT NULL,
  `supplier` VARCHAR(30) NOT NULL,
  INDEX `user_id_fk_idx` (`user_id_d` ASC),
  CONSTRAINT `user_id_fk`
    FOREIGN KEY (`user_id_d`)
    REFERENCES `editorialdb`.`user` (`id`)
    ON DELETE CASCADE ON UPDATE CASCADE);
	
LOCK TABLES `user` WRITE;
/*!40000 ALTER TABLE `user` DISABLE KEYS */;
INSERT INTO `user` VALUES (1,'user','$2a$12$iD9Psi.mmFcVXrvbeiI7Juiz5lDPn07Ska21Cnv21AgIHbIUE355m',1);
INSERT INTO `user` VALUES (2,'user2','$2a$12$5b36FpgFqvc7826RWQpBxObz0oQAxadnVCwgJ43XEGhJJrrcs/mli',1);
INSERT INTO `user` VALUES (3,'user3','$2a$12$nbrlhOxErstHKvSJyjzJ1uCAhItuoukWXlyYXWiTqf/Z/QSNPNP8O',1);
INSERT INTO `user` VALUES (4,'user4','$2a$12$CV0QLaHzkp.O2PEIP7GdHOm/1ykl2ySBS3RSqKl2OBgGAJE87DpRe',1);
INSERT INTO `user` VALUES (5,'user5','$2a$12$ZIDwaTNwptT8Sa09/ZywruvOunIBmBChY6Jd3yIvetidOHvwjIK3u',1);
/*!40000 ALTER TABLE `user` ENABLE KEYS */;
UNLOCK TABLES;

LOCK TABLES `user_detail` WRITE;
/*!40000 ALTER TABLE `user_detail` DISABLE KEYS */;
INSERT INTO `user_detail` VALUES (1,'UserName','UserSurname','UserEmail@email.com','APP');
INSERT INTO `user_detail` VALUES (2,'UserName','UserSurname','UserEmail@email.com','APP');
INSERT INTO `user_detail` VALUES (3,'UserName','UserSurname','UserEmail@email.com','APP');
INSERT INTO `user_detail` VALUES (4,'UserNameJourn','UserSurnameJourn','UserEmailJourn@email.com','APP');
INSERT INTO `user_detail` VALUES (5,'UserNameRed','UserSurnameRed','UserEmailRed@email.com','APP');
/*!40000 ALTER TABLE `user_detail` ENABLE KEYS */;
UNLOCK TABLES;

LOCK TABLES `authority` WRITE;
/*!40000 ALTER TABLE `authority` DISABLE KEYS */;
INSERT INTO `authority` VALUES (1,'USER');
INSERT INTO `authority` VALUES (2,'ADMIN');
INSERT INTO `authority` VALUES (3,'USER');
INSERT INTO `authority` VALUES (4,'JOURNALIST');
INSERT INTO `authority` VALUES (5,'REDACTOR');
/*!40000 ALTER TABLE `authority` ENABLE KEYS */;
UNLOCK TABLES;